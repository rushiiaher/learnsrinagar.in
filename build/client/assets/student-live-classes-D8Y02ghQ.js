import{y as M,r as I,n as e}from"./components-CK9cG6NQ.js";import{C as d,d as D}from"./card-CA1SrpzI.js";import{B as Z}from"./badge-CcGIdf3j.js";import{B as g}from"./button-8oCJS-za.js";import{D as A,a as S,b as W,c as _,d as z}from"./dialog-B7fq2mTW.js";import{P as m}from"./play-CXAmcsiu.js";import{C as c,a as v}from"./clock-XivtrA7v.js";import"./index-DPB-uZjz.js";import"./index-Z0unZZUp.js";import"./index-B5_uNIGj.js";import"./index-B4ME6Vf2.js";import"./x-DGchQd-t.js";import"./createLucideIcon-B7_wo53H.js";const w=i=>{const l={scheduled:{color:"bg-blue-100 text-blue-800",icon:c,text:"Scheduled"},live:{color:"bg-red-100 text-red-800",icon:m,text:"Live Now"},completed:{color:"bg-green-100 text-green-800",icon:v,text:"Completed"},cancelled:{color:"bg-gray-100 text-gray-800",icon:c,text:"Cancelled"}},r=l[i]||l.scheduled,t=r.icon;return e.jsxs(Z,{className:`${r.color} flex items-center gap-1`,children:[e.jsx(t,{className:"h-3 w-3"}),r.text]})},G=i=>{const l=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?|live)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,r=i.match(l);return r?r[1]:null},u=i=>{const l=G(i);return l?`https://img.youtube.com/vi/${l}/hqdefault.jpg`:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMyMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMjAiIGhlaWdodD0iMTgwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMzAgMTIwTDE3MCA5MEwxMzAgNjBWMTIwWiIgZmlsbD0iI0VGNDQ0NCIvPgo8L3N2Zz4K"};function K(){const{liveClasses:i,user:l,schoolName:r}=M(),[t,L]=I.useState(null),[f,y]=I.useState(!1),x=s=>{window.open(s.youtube_live_link,"_blank")},h=i.map(s=>{if(!s.start_time)return s;const a=new Date,b=new Date(s.start_time),o=s.end_time?new Date(s.end_time):null;let n=s.status;return a<b?n="upcoming":o&&a>o?n="completed":a>=b&&(!o||a<=o)&&(n="live"),{...s,status:n}}),j=h.filter(s=>s.status==="live"),p=h.filter(s=>s.status==="upcoming"||s.status==="scheduled"),N=h.filter(s=>s.status==="completed");return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Live Classes"}),e.jsxs("p",{className:"text-muted-foreground",children:[r," - Watch live lectures and access recorded sessions"]})]}),j.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-red-600 flex items-center gap-2",children:[e.jsx(m,{className:"h-6 w-6"}),"Live Now"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(s=>e.jsxs(d,{className:"overflow-hidden border-red-200 bg-red-50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",children:[e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("img",{src:u(s.youtube_live_link),alt:s.title,className:"w-full h-full object-cover",onError:a=>{a.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMyMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMjAiIGhlaWdodD0iMTgwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMzAgMTIwTDE3MCA5MEwxMzAgNjBWMTIwWiIgZmlsbD0iI0VGNDQ0NCIvPgo8L3N2Zz4K"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsxs("div",{className:"bg-red-600 text-white px-2 py-1 rounded-full text-xs font-semibold flex items-center gap-1 animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),"LIVE"]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-1 line-clamp-2",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-1",children:s.topic_name}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Teacher:"}),e.jsx("span",{children:s.teacher_name})]}),s.subject_name&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Subject:"}),e.jsx("span",{children:s.subject_name})]})]}),e.jsxs(g,{className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 rounded-lg transition-colors duration-200",onClick:()=>x(s),children:[e.jsx(m,{className:"mr-2 h-5 w-5"}),"Join Live Session"]})]})]},s.id))})]}),p.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(c,{className:"h-6 w-6"}),"Upcoming Sessions"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(s=>e.jsxs(d,{className:"overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 hover:scale-[1.02]",children:[e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("img",{src:u(s.youtube_live_link),alt:s.title,className:"w-full h-full object-cover",onError:a=>{a.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMyMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMjAiIGhlaWdodD0iMTgwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMzAgMTIwTDE3MCA5MEwxMzAgNjBWMTIwWiIgZmlsbD0iI0VGNDQ0NCIvPgo8L3N2Zz4K"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 to-transparent"}),e.jsx("div",{className:"absolute top-3 right-3",children:w(s.status)})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-1 line-clamp-2",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-1",children:s.topic_name}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Teacher:"}),e.jsx("span",{children:s.teacher_name})]}),s.subject_name&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Subject:"}),e.jsx("span",{children:s.subject_name})]}),s.start_time&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Starts:"}),e.jsx("span",{className:"text-blue-600 font-medium",children:new Date(s.start_time).toLocaleString()})]})]}),e.jsxs(g,{variant:"outline",className:"w-full border-blue-200 hover:bg-blue-50 hover:border-blue-300 transition-colors duration-200",onClick:()=>x(s),children:[e.jsx(c,{className:"mr-2 h-4 w-4"}),"Preview Session"]})]})]},s.id))})]}),N.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(v,{className:"h-6 w-6"}),"Completed Sessions"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(s=>e.jsxs(d,{className:"overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 bg-gray-50",children:[e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("img",{src:u(s.youtube_live_link),alt:s.title,className:"w-full h-full object-cover opacity-80",onError:a=>{a.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMyMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMjAiIGhlaWdodD0iMTgwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMzAgMTIwTDE3MCA5MEwxMzAgNjBWMTIwWiIgZmlsbD0iI0VGNDQ0NCIvPgo8L3N2Zz4K"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-3 right-3",children:w(s.status)})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-1 line-clamp-2 text-gray-800",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-1",children:s.topic_name}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Teacher:"}),e.jsx("span",{children:s.teacher_name})]}),s.subject_name&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Subject:"}),e.jsx("span",{children:s.subject_name})]})]}),e.jsxs(g,{variant:"outline",className:"w-full border-green-200 hover:bg-green-50 hover:border-green-300 transition-colors duration-200",onClick:()=>x(s),children:[e.jsx(m,{className:"mr-2 h-4 w-4"}),"Watch Recording"]})]})]},s.id))})]}),i.length===0&&e.jsx(d,{children:e.jsxs(D,{className:"text-center py-12",children:[e.jsx(c,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Live Classes Available"}),e.jsx("p",{className:"text-muted-foreground",children:"There are currently no live classes scheduled for your class. Check back later!"})]})}),e.jsx(A,{open:f,onOpenChange:y,children:e.jsxs(S,{className:"max-w-4xl max-h-[90vh]",children:[e.jsxs(W,{children:[e.jsx(_,{children:t==null?void 0:t.title}),e.jsxs(z,{children:[t==null?void 0:t.topic_name," - ",t==null?void 0:t.teacher_name]})]}),t&&e.jsx("div",{className:"aspect-video",children:t.videoId?e.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${t.videoId}?autoplay=1`,title:t.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"rounded-lg"}):e.jsx("iframe",{width:"100%",height:"100%",src:t.youtube_live_link,title:t.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"rounded-lg"})})]})})]})}export{K as default};
