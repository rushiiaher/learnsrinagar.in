import{y as R,w as M,C as k,D as z,r as n,n as e}from"./components-CK9cG6NQ.js";import{t as j}from"./index-C8LQY8mX.js";import{B as l}from"./button-8oCJS-za.js";import{I as E}from"./input-BXDRLaNk.js";import{D as F,a as H,b as O,c as _,d as B,e as I}from"./dialog-B7fq2mTW.js";import{u as K,f,A as L,a as U,b as V,c as q,d as G,e as J,g as Q,h as W,i as X,j as Y}from"./index-BpyxCKkI.js";import{T as Z,a as $,b as u,c as ee,d as se,e as C}from"./table-CRJQl8tI.js";import{P as ae}from"./plus-BQN0Gcjy.js";import{P as te}from"./pencil-DYF0NOrj.js";import{T as le}from"./trash-sprkVQyV.js";import"./index-DPB-uZjz.js";import"./index-Z0unZZUp.js";import"./index-B5_uNIGj.js";import"./index-B4ME6Vf2.js";import"./x-DGchQd-t.js";import"./createLucideIcon-B7_wo53H.js";function be(){const{classes:D}=R(),i=M(),p=k();z();const[b,o]=n.useState(!1),[r,x]=n.useState("create"),[c,g]=n.useState(null),[N,m]=n.useState(!1),[d,v]=n.useState(null);n.useEffect(()=>{i&&(i.success?(j.success(i.message),o(!1)):j.error(i.message))},[i]);const y=()=>{x("create"),g(null),o(!0)},T=s=>{x("update"),g(s),o(!0)},w=s=>{v(s),m(!0)},A=()=>{const s=new FormData;s.append("_action","delete"),s.append("id",d.id),p(s,{method:"post"}),m(!1)},S=s=>{s.preventDefault();const a=new FormData(s.currentTarget);a.append("_action",r),r==="update"&&c&&a.append("id",c.id),p(a,{method:"post"})},h=[{accessorKey:"name",header:"Class",cell:({row:s})=>e.jsx("div",{className:"text-center flex items-center justify-center gap-2",children:s.original.name})},{accessorKey:"created_at",header:"Created At",cell:({row:s})=>e.jsx("div",{className:"text-center",children:new Date(s.original.created_at).toLocaleDateString()})},{id:"actions",header:"Actions",cell:({row:s})=>e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>T(s.original),children:e.jsx(te,{className:"size-4"})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>w(s.original),children:e.jsx(le,{className:"size-4"})})]})}],t=K({data:D,columns:h,getCoreRowModel:Y(),getPaginationRowModel:X(),initialState:{pagination:{pageSize:10}}}),P=r==="create"?"Create New Class":"Edit Class";return e.jsxs("div",{className:"container mx-auto pb-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("span",{className:"ml-2 pt-2 text-xl font-semibold",children:"Manage Classes"}),e.jsxs(l,{onClick:y,children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Add Class"})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Z,{children:[e.jsx($,{children:t.getHeaderGroups().map(s=>e.jsx(u,{children:s.headers.map(a=>e.jsx(ee,{className:"text-center",children:a.isPlaceholder?null:f(a.column.columnDef.header,a.getContext())},a.id))},s.id))}),e.jsx(se,{children:t.getRowModel().rows.length?t.getRowModel().rows.map(s=>e.jsx(u,{"data-state":s.getIsSelected()&&"selected",children:s.getVisibleCells().map(a=>e.jsx(C,{className:"text-center",children:f(a.column.columnDef.cell,a.getContext())},a.id))},s.id)):e.jsx(u,{children:e.jsx(C,{colSpan:h.length,className:"h-24 text-center",children:"No classes found."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:"Previous"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:"Next"})]}),e.jsx(F,{open:b,onOpenChange:o,children:e.jsxs(H,{children:[e.jsxs(O,{children:[e.jsx(_,{children:P}),e.jsx(B,{children:r==="create"?"Fill out the form below to create a new class.":"Update the class information."})]}),e.jsxs("form",{onSubmit:S,children:[e.jsx("div",{className:"grid gap-4 pb-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"name",children:"Class Number"}),e.jsx(E,{id:"name",name:"name",type:"number",placeholder:"Enter class number (e.g., 1, 2, 3)",defaultValue:(c==null?void 0:c.name)||"",pattern:"[0-9]*",inputMode:"numeric",required:!0})]})}),e.jsxs(I,{children:[e.jsx(l,{variant:"outline",onClick:()=>o(!1),type:"button",children:"Cancel"}),e.jsx(l,{type:"submit",children:r==="create"?"Create Class":"Update Class"})]})]})]})}),e.jsx(L,{open:N,onOpenChange:m,children:e.jsxs(U,{children:[e.jsxs(V,{className:"text-center",children:[e.jsx(q,{children:"Delete Class"}),e.jsxs(G,{children:['Are you sure you want to delete class "',d==null?void 0:d.name,'"? This action cannot be undone.']})]}),e.jsxs(J,{className:"flex justify-end",children:[e.jsx(Q,{children:"Cancel"}),e.jsx(W,{onClick:A,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})})]})}export{be as default};
