import{y as R,w as k,C as F,r,n as e}from"./components-CK9cG6NQ.js";import{t as f}from"./index-C8LQY8mX.js";import{B as n}from"./button-8oCJS-za.js";import{I as p}from"./input-BXDRLaNk.js";import{D as z,a as M,b as H,c as O,d as _,e as q}from"./dialog-B7fq2mTW.js";import{u as B,f as D,A as I,a as K,b as L,c as V,d as U,e as G,g as J,h as Q,i as W,j as X}from"./index-BpyxCKkI.js";import{T as Y,a as Z,b as x,c as $,d as ee,e as b}from"./table-CRJQl8tI.js";import{P as ae}from"./plus-BQN0Gcjy.js";import{P as se}from"./pencil-DYF0NOrj.js";import{T as te}from"./trash-sprkVQyV.js";import"./index-DPB-uZjz.js";import"./index-Z0unZZUp.js";import"./index-B5_uNIGj.js";import"./index-B4ME6Vf2.js";import"./x-DGchQd-t.js";import"./createLucideIcon-B7_wo53H.js";function be(){const{admins:N}=R(),o=k(),h=F(),[C,d]=r.useState(!1),[i,u]=r.useState("create"),[t,g]=r.useState(null),[v,m]=r.useState(!1),[c,A]=r.useState(null);r.useEffect(()=>{o&&(o.success?(f.success(o.message),d(!1)):f.error(o.message))},[o]);const w=()=>{u("create"),g(null),d(!0)},y=a=>{u("update"),g(a),d(!0)},T=a=>{A(a),m(!0)},P=()=>{const a=new FormData;a.append("_action","delete"),a.append("id",c.id),h(a,{method:"post"}),m(!1)},S=a=>{a.preventDefault();const s=new FormData(a.currentTarget);s.append("_action",i),i==="update"&&t&&s.append("id",t.id),h(s,{method:"post"})},j=[{accessorKey:"name",header:"Name",cell:({row:a})=>e.jsx("div",{className:"text-center",children:a.original.name})},{accessorKey:"email",header:"Email",cell:({row:a})=>e.jsx("div",{className:"text-center",children:a.original.email})},{accessorKey:"created_at",header:"Created At",cell:({row:a})=>e.jsx("div",{className:"text-center",children:new Date(a.original.created_at).toLocaleDateString()})},{id:"actions",header:"Actions",cell:({row:a})=>e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>y(a.original),children:e.jsx(se,{className:"size-4"})}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>T(a.original),children:e.jsx(te,{className:"size-4"})})]})}],l=B({data:N,columns:j,getCoreRowModel:X(),getPaginationRowModel:W(),initialState:{pagination:{pageSize:10}}}),E=i==="create"?"Create New Admin":"Edit Admin";return e.jsxs("div",{className:"container mx-auto pb-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("span",{className:"ml-2 pt-2 text-xl font-semibold",children:"Manage Admins"}),e.jsxs(n,{onClick:w,children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Add Admin"})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Y,{children:[e.jsx(Z,{children:l.getHeaderGroups().map(a=>e.jsx(x,{children:a.headers.map(s=>e.jsx($,{className:"text-center",children:s.isPlaceholder?null:D(s.column.columnDef.header,s.getContext())},s.id))},a.id))}),e.jsx(ee,{children:l.getRowModel().rows.length?l.getRowModel().rows.map(a=>e.jsx(x,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(s=>e.jsx(b,{className:"text-center",children:D(s.column.columnDef.cell,s.getContext())},s.id))},a.id)):e.jsx(x,{children:e.jsx(b,{colSpan:j.length,className:"h-24 text-center",children:"No admins found."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:"Previous"}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:"Next"})]}),e.jsx(z,{open:C,onOpenChange:d,children:e.jsxs(M,{children:[e.jsxs(H,{children:[e.jsx(O,{children:E}),e.jsx(_,{children:i==="create"?"Fill out the form below to create a new admin.":"Update the admin information."})]}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"grid gap-4 pb-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx(p,{id:"name",name:"name",placeholder:"Enter admin name",defaultValue:(t==null?void 0:t.name)||"",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx(p,{id:"email",name:"email",type:"email",placeholder:"Enter admin email",defaultValue:(t==null?void 0:t.email)||"",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx(p,{id:"password",name:"password",type:"password",placeholder:i==="create"?"Enter password":"Leave blank to keep current password",required:i==="create"})]})]}),e.jsxs(q,{children:[e.jsx(n,{variant:"outline",onClick:()=>d(!1),type:"button",children:"Cancel"}),e.jsx(n,{type:"submit",children:i==="create"?"Create Admin":"Update Admin"})]})]})]})}),e.jsx(I,{open:v,onOpenChange:m,children:e.jsxs(K,{children:[e.jsxs(L,{className:"text-center",children:[e.jsx(V,{children:"Delete Admin"}),e.jsxs(U,{children:['Are you sure you want to delete admin "',c==null?void 0:c.name,'"? This action cannot be undone.']})]}),e.jsxs(G,{className:"flex justify-end",children:[e.jsx(J,{children:"Cancel"}),e.jsx(Q,{onClick:P,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})})]})}export{be as default};
